{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\"use strict\"\n\n\nexport function createGallery(arr) {\n    return arr.map(item => \n        `\n            <li class=\"gallery-item\">\n                <a href=\"${item.largeImageURL}\">\n                <img class=\"galerry-img\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" width=\"360\"/>\n                </a>\n                <div class=\"galerry-txt\">\n                    <div class=\"item-txt\">\n                        <p>Likes</p>\n                        <span class=\"item-span\">${item.likes}</span>\n                    </div>\n                    <div class=\"item-txt\">\n                        <p>Views</p>\n                        <span class=\"item-span\">${item.views}</span>\n                    </div>\n                    <div class=\"item-txt\">\n                        <p>Comments</p>\n                        <span class=\"item-span\">${item.comments}</span>\n                    </div>\n                    <div class=\"item-txt\">\n                        <p>Downloads</p>\n                        <span class=\"item-span\">${item.downloads}</span>\n                    </div>\n                </div>\n            </li>\n        `\n    ).join(\"\")\n}","\"use strict\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from 'axios';\n\nimport { createGallery } from './render-function';\n\nconst API_KEY = \"46809908-9f97c0ef37b027eaa1f813844\";\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector(\".gallery-list\");\nconst loadBtn = document.querySelector('.load-btn');\n\nlet page = 1;\nlet lightbox;\nlet totalHits = 0; \nlet loadedImagesCount = 0; \n\nexport function searchImage() {\n    page = 1;\n    loadedImagesCount = 0;\n\n    loader.classList.remove('unvisible');\n    loadBtn.classList.add('unvisible');\n\n    gallery.innerHTML = \"\";\n\n    createList();\n}\n\nasync function createList() {\n    let params = new URLSearchParams({\n        key: API_KEY,\n        q: `${localStorage.getItem(\"search\")}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page,\n    });\n\n    await axios.get(`https://pixabay.com/api/?${params}`)\n        .then(data => {\n            totalHits = data.data.totalHits; \n            const currentHits = data.data.hits.length;\n\n            if (currentHits === 0) {\n                loader.classList.add('unvisible');\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'center',\n                    color: '#ca0000',\n                    messageColor: \"white\",\n                    close: true,\n                    timeout: 2000,\n                    progressBar: true,\n                    iconColor: \"white\",\n                    icon: false,\n                    maxWidth: \"300\"\n                });\n            } else {\n                loader.classList.add('unvisible');\n                gallery.insertAdjacentHTML(\"beforeend\", createGallery(data.data.hits));\n                loadedImagesCount += currentHits;\n\n\n                if (loadedImagesCount >= totalHits) {\n                    loadBtn.classList.add(\"unvisible\");\n                    iziToast.error({\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        position: 'topRight',\n                        color: 'blue',\n                        messageColor: \"black\",\n                        close: true,\n                        timeout: 2000,\n                        progressBar: true,\n                        iconColor: \"white\",\n                        icon: false,\n                        maxWidth: \"300\"\n                    });\n                } else {\n                    loadBtn.classList.remove('unvisible');\n                }\n            }\n        })\n        .catch(error => {\n            loader.classList.add('unvisible');\n            iziToast.error({\n                message: `Oooops, error. Please try again!`,\n                position: 'center',\n                color: '#ca0000',\n                messageColor: \"white\",\n                close: true,\n                timeout: 2000,\n                progressBar: true,\n                iconColor: \"white\",\n                icon: false,\n                maxWidth: \"300\"\n            });\n        });\n\n    lightbox = new SimpleLightbox('.gallery-item a', {\n        disableScroll: false,\n        overlayOpacity: 0.9,\n        disableRightClick: true,\n    });\n}\n\nloadBtn.addEventListener(\"click\", async () => {\n   \n    if (loadedImagesCount >= totalHits) {\n        loadBtn.classList.add(\"unvisible\");\n        iziToast.error({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            color: 'blue',\n            messageColor: \"black\",\n            close: true,\n            timeout: 2000,\n            progressBar: true,\n            iconColor: \"white\",\n            icon: false,\n            maxWidth: \"300\"\n        });\n        return;\n    }\n\n    loader.classList.remove('unvisible');\n    loadBtn.classList.add(\"unvisible\");\n\n    lightbox.destroy();\n    page++;\n\n    await createList();\n\n    const item = document.querySelector(\".gallery-item\");\n    const itemHeight = item.getBoundingClientRect().height;\n    window.scrollBy({\n        left: 0,\n        top: itemHeight * 2,\n        behavior: \"smooth\"\n    });\n});","\"use strict\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchImage } from './js/pixabay-api'\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".input\");\nlet search = null;\n\nconst galleryContainer = document.querySelector(\".gallery\")\n\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault()\n    localStorage.removeItem(\"search\")\n    search = input.value\n    if (search.trim() === \"\") {\n        iziToast.error({\n                message: 'Enter your query',\n                position: 'center',\n                color: '#ca0000',\n                messageColor: \"white\",\n                close: false,\n                timeout: 1000,\n                progressBar: false,\n                iconColor: \"white\",\n                con: false,\n            });\n    }\n    else {\n        localStorage.setItem(\"search\", search )\n        searchImage()\n    }\n    form.reset()\n});"],"names":["createGallery","arr","item","API_KEY","loader","gallery","loadBtn","page","lightbox","totalHits","loadedImagesCount","searchImage","createList","params","axios","data","currentHits","iziToast","error","SimpleLightbox","itemHeight","form","input","search","event"],"mappings":"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"}